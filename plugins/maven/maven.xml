<?xml version="1.0" encoding="UTF-8"?>

<project default="vulcan"
  xmlns:j="jelly:core"
  xmlns:ant="jelly:ant"
  xmlns:define="jelly:define"
  xmlns:maven="jelly:maven">

	<preGoal name="java:compile">
      	<ant:javac
          destdir="${maven.build.dest}"
          excludes="**/package.html"
          debug="${maven.compile.debug}"
          deprecation="${maven.compile.deprecation}"
          optimize="${maven.compile.optimize}">
          <ant:src>
            <ant:path location="source/anthelper/java"/>
          </ant:src>

          <ant:setProperty name="source" value="1.3" />
          <ant:setProperty name="target" value="1.3" />

          <ant:classpath>
            <ant:path refid="maven.dependency.classpath"/>
            <ant:pathelement path="${maven.build.dest}"/>
          </ant:classpath>
          <j:if test="${context.getVariable('maven.compile.compilerargs') != null}">
            <ant:compilerarg line="${maven.compile.compilerargs}" />
          </j:if>
          
          <j:if test="${context.getVariable('maven.compile.encoding') != null}">
            <ant:setProperty name="encoding" value="${maven.compile.encoding}" />
          </j:if>
          
          <j:if test="${context.getVariable('maven.compile.executable') != null}">
            <ant:setProperty name="executable" value="${maven.compile.executable}" />
          </j:if>
          
          <j:if test="${context.getVariable('maven.compile.fork') != null}">
            <ant:setProperty name="fork" value="${maven.compile.fork}" />

            <j:if test="${context.getVariable('maven.compile.memoryInitialSize') != null}">
              <ant:setProperty name="memoryInitialSize" value="${maven.compile.memoryInitialSize}" />
            </j:if>

            <j:if test="${context.getVariable('maven.compile.memoryMaximumSize') != null}">
              <ant:setProperty name="memoryMaximumSize" value="${maven.compile.memoryMaximumSize}" />
            </j:if>

          </j:if>
          
          <j:if test="${context.getVariable('maven.compile.verbose') != null}">
            <ant:setProperty name="verbose" value="${maven.compile.verbose}" />
          </j:if>
        </ant:javac>
	</preGoal>
</project>
